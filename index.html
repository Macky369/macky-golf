<style>
  /* --- 既存のスタイルに以下を追加・修正 --- */
  
  /* 計測中のボタン色（オレンジ） */
  #shot-btn.measuring {
    background: #ff8c00; 
    box-shadow: 0 0 15px #ff8c00;
    animation: pulse 1.5s infinite;
  }

  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
  }

  /* ⚙️は右端を死守 */
  .settings {
    position: absolute; right: 8%; top: 50%;
    transform: translateY(-50%); font-size: 28px;
  }
</style>

<script>
// --- startShot関数を差し替え ---
function startShot() {
  const btn = document.getElementById('shot-btn');
  
  if (navigator.vibrate) navigator.vibrate(50);

  // 1. 即座に表示を更新
  document.getElementById('remaining').innerText = totalDist;
  document.getElementById('drive').innerText = "000";
  
  // 2. ボタンを「計測中」のデザインに変える
  btn.classList.add('measuring');
  btn.innerText = "MEASURING";

  if (!navigator.geolocation) return alert("GPS不可");
  if (watchId) navigator.geolocation.clearWatch(watchId);

  navigator.geolocation.getCurrentPosition(pos => {
    startPos = pos.coords;
    watchId = navigator.geolocation.watchPosition(update, null, {enableHighAccuracy:true});
  }, (err) => {
    resetAll(); // 失敗したら元に戻す
    alert("GPSを探しています...開けた場所で再試行してください。");
  }, {enableHighAccuracy:true, timeout:10000});
}

// --- resetAll関数も差し替え（ボタンを元に戻すため） ---
function resetAll() {
  if (navigator.vibrate) navigator.vibrate([30, 30]);
  if (watchId) navigator.geolocation.clearWatch(watchId);
  
  startPos = null;
  const btn = document.getElementById('shot-btn');
  
  // ボタンを元の緑に戻す
  btn.classList.remove('measuring');
  btn.innerText = "SHOT A";
  
  document.getElementById('drive').innerText = "000";
  document.getElementById('remaining').innerText = "---";
}
</script>